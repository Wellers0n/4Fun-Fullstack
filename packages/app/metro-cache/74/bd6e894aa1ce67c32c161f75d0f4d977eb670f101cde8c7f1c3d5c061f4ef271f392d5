{"dependencies":[{"name":"@babel/runtime/helpers/extends","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"Blob","data":{"isAsync":false}},{"name":"BlobRegistry","data":{"isAsync":false}},{"name":"NativeModules","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var _extends = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/extends\");\n\n  var _classCallCheck = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\");\n\n  var _createClass = _$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/createClass\");\n\n  var Blob = _$$_REQUIRE(_dependencyMap[3], \"Blob\");\n\n  var BlobRegistry = _$$_REQUIRE(_dependencyMap[4], \"BlobRegistry\");\n\n  var _require = _$$_REQUIRE(_dependencyMap[5], \"NativeModules\"),\n      BlobModule = _require.BlobModule;\n\n  function uuidv4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      var r = Math.random() * 16 | 0,\n          v = c == 'x' ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  }\n\n  var BlobManager = function () {\n    function BlobManager() {\n      _classCallCheck(this, BlobManager);\n    }\n\n    _createClass(BlobManager, null, [{\n      key: \"createFromParts\",\n      value: function createFromParts(parts, options) {\n        var blobId = uuidv4();\n        var items = parts.map(function (part) {\n          if (part instanceof ArrayBuffer || global.ArrayBufferView && part instanceof global.ArrayBufferView) {\n            throw new Error(\"Creating blobs from 'ArrayBuffer' and 'ArrayBufferView' are not supported\");\n          }\n\n          if (part instanceof Blob) {\n            return {\n              data: part.data,\n              type: 'blob'\n            };\n          } else {\n            return {\n              data: String(part),\n              type: 'string'\n            };\n          }\n        });\n        var size = items.reduce(function (acc, curr) {\n          if (curr.type === 'string') {\n            return acc + global.unescape(encodeURI(curr.data)).length;\n          } else {\n            return acc + curr.data.size;\n          }\n        }, 0);\n        BlobModule.createFromParts(items, blobId);\n        return BlobManager.createFromOptions({\n          blobId: blobId,\n          offset: 0,\n          size: size,\n          type: options ? options.type : '',\n          lastModified: options ? options.lastModified : Date.now()\n        });\n      }\n    }, {\n      key: \"createFromOptions\",\n      value: function createFromOptions(options) {\n        BlobRegistry.register(options.blobId);\n        return _extends(Object.create(Blob.prototype), {\n          data: options\n        });\n      }\n    }, {\n      key: \"release\",\n      value: function release(blobId) {\n        BlobRegistry.unregister(blobId);\n\n        if (BlobRegistry.has(blobId)) {\n          return;\n        }\n\n        BlobModule.release(blobId);\n      }\n    }, {\n      key: \"addNetworkingHandler\",\n      value: function addNetworkingHandler() {\n        BlobModule.addNetworkingHandler();\n      }\n    }, {\n      key: \"addWebSocketHandler\",\n      value: function addWebSocketHandler(socketId) {\n        BlobModule.addWebSocketHandler(socketId);\n      }\n    }, {\n      key: \"removeWebSocketHandler\",\n      value: function removeWebSocketHandler(socketId) {\n        BlobModule.removeWebSocketHandler(socketId);\n      }\n    }, {\n      key: \"sendOverSocket\",\n      value: function sendOverSocket(blob, socketId) {\n        BlobModule.sendOverSocket(blob.data, socketId);\n      }\n    }]);\n\n    return BlobManager;\n  }();\n\n  BlobManager.isAvailable = !!BlobModule;\n  module.exports = BlobManager;\n});","map":[[2,0,11,0],[10,0,13,0],[10,6,13,6,"Blob"],[10,10,13,10],[10,13,13,13,"require"],[10,24,13,20],[10,51,13,0],[12,0,14,0],[12,6,14,6,"BlobRegistry"],[12,18,14,18],[12,21,14,21,"require"],[12,32,14,28],[12,67,14,0],[14,17,15,21,"require"],[14,28,15,28],[14,64],[15,6,15,7,"BlobModule"],[15,16],[15,28,15,7,"BlobModule"],[15,38],[17,0,26,0],[17,11,26,9,"uuidv4"],[17,17,26,0],[17,20,26,26],[18,0,27,2],[18,11,27,9],[18,50,27,48,"replace"],[18,57,27,9],[18,58,27,56],[18,65,27,9],[18,67,27,65],[18,77,27,65,"c"],[18,78,27,66],[18,80,27,70],[19,0,28,4],[19,10,28,10,"r"],[19,11,28,11],[19,14,28,15,"Math"],[19,18,28,19],[19,19,28,20,"random"],[19,25,28,15],[19,30,28,31],[19,32,28,14],[19,35,28,37],[19,36,28,4],[20,0,28,4],[20,10,29,6,"v"],[20,11,29,7],[20,14,29,10,"c"],[20,15,29,11],[20,19,29,15],[20,22,29,10],[20,25,29,21,"r"],[20,26,29,10],[20,29,29,26,"r"],[20,30,29,27],[20,33,29,30],[20,36,29,25],[20,39,29,37],[20,42,28,4],[21,0,30,4],[21,13,30,11,"v"],[21,14,30,12],[21,15,30,13,"toString"],[21,23,30,11],[21,24,30,22],[21,26,30,11],[21,27,30,4],[22,0,31,3],[22,5,27,9],[22,6,27,2],[23,0,32,1],[25,6,37,6,"BlobManager"],[25,17],[32,38,47,4,"parts"],[32,43],[32,45,48,4,"options"],[32,52],[32,54,49,10],[33,0,50,4],[33,12,50,10,"blobId"],[33,18,50,16],[33,21,50,19,"uuidv4"],[33,27,50,25],[33,29,50,4],[34,0,51,4],[34,12,51,10,"items"],[34,17,51,15],[34,20,51,18,"parts"],[34,25,51,23],[34,26,51,24,"map"],[34,29,51,18],[34,30,51,28],[34,40,51,28,"part"],[34,44,51,32],[34,46,51,36],[35,0,52,6],[35,14,53,8,"part"],[35,18,53,12],[35,30,53,24,"ArrayBuffer"],[35,41,53,8],[35,45,54,9,"global"],[35,51,54,15],[35,52,54,16,"ArrayBufferView"],[35,67,54,9],[35,71,54,35,"part"],[35,75,54,39],[35,87,54,51,"global"],[35,93,54,57],[35,94,54,58,"ArrayBufferView"],[35,109,52,6],[35,111,55,8],[36,0,56,8],[36,18,56,14],[36,22,56,18,"Error"],[36,27,56,14],[36,28,57,10],[36,103,56,14],[36,104,56,8],[37,0,59,7],[39,0,60,6],[39,14,60,10,"part"],[39,18,60,14],[39,30,60,26,"Blob"],[39,34,60,6],[39,36,60,32],[40,0,61,8],[40,19,61,15],[41,0,62,10,"data"],[41,14,62,10,"data"],[41,18,62,14],[41,20,62,16,"part"],[41,24,62,20],[41,25,62,21,"data"],[41,29,61,15],[42,0,63,10,"type"],[42,14,63,10,"type"],[42,18,63,14],[42,20,63,16],[43,0,61,15],[43,13,61,8],[44,0,65,7],[44,11,60,6],[44,17,65,13],[45,0,66,8],[45,19,66,15],[46,0,67,10,"data"],[46,14,67,10,"data"],[46,18,67,14],[46,20,67,16,"String"],[46,26,67,22],[46,27,67,23,"part"],[46,31,67,22],[46,32,66,15],[47,0,68,10,"type"],[47,14,68,10,"type"],[47,18,68,14],[47,20,68,16],[48,0,66,15],[48,13,66,8],[49,0,70,7],[50,0,71,5],[50,9,51,18],[50,10,51,4],[51,0,72,4],[51,12,72,10,"size"],[51,16,72,14],[51,19,72,17,"items"],[51,24,72,22],[51,25,72,23,"reduce"],[51,31,72,17],[51,32,72,30],[51,42,72,31,"acc"],[51,45,72,30],[51,47,72,36,"curr"],[51,51,72,30],[51,53,72,45],[52,0,73,6],[52,14,73,10,"curr"],[52,18,73,14],[52,19,73,15,"type"],[52,23,73,10],[52,28,73,24],[52,36,73,6],[52,38,73,34],[53,0,74,8],[53,19,74,15,"acc"],[53,22,74,18],[53,25,74,21,"global"],[53,31,74,27],[53,32,74,28,"unescape"],[53,40,74,21],[53,41,74,37,"encodeURI"],[53,50,74,46],[53,51,74,47,"curr"],[53,55,74,51],[53,56,74,52,"data"],[53,60,74,46],[53,61,74,21],[53,63,74,59,"length"],[53,69,74,8],[54,0,75,7],[54,11,73,6],[54,17,75,13],[55,0,76,8],[55,19,76,15,"acc"],[55,22,76,18],[55,25,76,21,"curr"],[55,29,76,25],[55,30,76,26,"data"],[55,34,76,21],[55,35,76,31,"size"],[55,39,76,8],[56,0,77,7],[57,0,78,5],[57,9,72,17],[57,11,78,7],[57,12,72,17],[57,13,72,4],[58,0,80,4,"BlobModule"],[58,8,80,4,"BlobModule"],[58,18,80,14],[58,19,80,15,"createFromParts"],[58,34,80,4],[58,35,80,31,"items"],[58,40,80,4],[58,42,80,38,"blobId"],[58,48,80,4],[59,0,82,4],[59,15,82,11,"BlobManager"],[59,26,82,22],[59,27,82,23,"createFromOptions"],[59,44,82,11],[59,45,82,41],[60,0,83,6,"blobId"],[60,10,83,6,"blobId"],[60,16,83,12],[60,18,83,6,"blobId"],[60,24,82,41],[61,0,84,6,"offset"],[61,10,84,6,"offset"],[61,16,84,12],[61,18,84,14],[61,19,82,41],[62,0,85,6,"size"],[62,10,85,6,"size"],[62,14,85,10],[62,16,85,6,"size"],[62,20,82,41],[63,0,86,6,"type"],[63,10,86,6,"type"],[63,14,86,10],[63,16,86,12,"options"],[63,23,86,19],[63,26,86,22,"options"],[63,33,86,29],[63,34,86,30,"type"],[63,38,86,19],[63,41,86,37],[63,43,82,41],[64,0,87,6,"lastModified"],[64,10,87,6,"lastModified"],[64,22,87,18],[64,24,87,20,"options"],[64,31,87,27],[64,34,87,30,"options"],[64,41,87,37],[64,42,87,38,"lastModified"],[64,54,87,27],[64,57,87,53,"Date"],[64,61,87,57],[64,62,87,58,"now"],[64,65,87,53],[65,0,82,41],[65,9,82,11],[65,10,82,4],[66,0,89,3],[69,40,95,27,"options"],[69,47],[69,49,95,52],[70,0,96,4,"BlobRegistry"],[70,8,96,4,"BlobRegistry"],[70,20,96,16],[70,21,96,17,"register"],[70,29,96,4],[70,30,96,26,"options"],[70,37,96,33],[70,38,96,34,"blobId"],[70,44,96,4],[71,0,97,4],[71,15,97,11],[71,24,97,25,"Object"],[71,30,97,31],[71,31,97,32,"create"],[71,37,97,25],[71,38,97,39,"Blob"],[71,42,97,43],[71,43,97,44,"prototype"],[71,52,97,25],[71,53,97,11],[71,55,97,56],[72,0,97,57,"data"],[72,10,97,57,"data"],[72,14,97,61],[72,16,97,63,"options"],[73,0,97,56],[73,9,97,11],[73,10,97,4],[74,0,98,3],[77,30,103,17,"blobId"],[77,36],[77,38,103,39],[78,0,104,4,"BlobRegistry"],[78,8,104,4,"BlobRegistry"],[78,20,104,16],[78,21,104,17,"unregister"],[78,31,104,4],[78,32,104,28,"blobId"],[78,38,104,4],[80,0,105,4],[80,12,105,8,"BlobRegistry"],[80,24,105,20],[80,25,105,21,"has"],[80,28,105,8],[80,29,105,25,"blobId"],[80,35,105,8],[80,36,105,4],[80,38,105,34],[81,0,106,6],[82,0,107,5],[84,0,108,4,"BlobModule"],[84,8,108,4,"BlobModule"],[84,18,108,14],[84,19,108,15,"release"],[84,26,108,4],[84,27,108,23,"blobId"],[84,33,108,4],[85,0,109,3],[88,45,115,38],[89,0,116,4,"BlobModule"],[89,8,116,4,"BlobModule"],[89,18,116,14],[89,19,116,15,"addNetworkingHandler"],[89,39,116,4],[90,0,117,3],[93,42,123,29,"socketId"],[93,50],[93,52,123,53],[94,0,124,4,"BlobModule"],[94,8,124,4,"BlobModule"],[94,18,124,14],[94,19,124,15,"addWebSocketHandler"],[94,38,124,4],[94,39,124,35,"socketId"],[94,47,124,4],[95,0,125,3],[98,45,131,32,"socketId"],[98,53],[98,55,131,56],[99,0,132,4,"BlobModule"],[99,8,132,4,"BlobModule"],[99,18,132,14],[99,19,132,15,"removeWebSocketHandler"],[99,41,132,4],[99,42,132,38,"socketId"],[99,50,132,4],[100,0,133,3],[103,37,138,24,"blob"],[103,41],[103,43,138,36,"socketId"],[103,51],[103,53,138,60],[104,0,139,4,"BlobModule"],[104,8,139,4,"BlobModule"],[104,18,139,14],[104,19,139,15,"sendOverSocket"],[104,33,139,4],[104,34,139,30,"blob"],[104,38,139,34],[104,39,139,35,"data"],[104,43,139,4],[104,45,139,41,"socketId"],[104,53,139,4],[105,0,140,3],[111,0,37,6,"BlobManager"],[111,2,37,6,"BlobManager"],[111,13],[111,14,41,9,"isAvailable"],[111,25],[111,28,41,23],[111,29,41,24],[111,30,41,25,"BlobModule"],[111,40],[112,0,143,0,"module"],[112,2,143,0,"module"],[112,8,143,6],[112,9,143,7,"exports"],[112,16,143,0],[112,19,143,17,"BlobManager"],[112,30,143,0]]},"type":"js/module"}]}