{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"PixelRatio","data":{"isAsync":false}},{"name":"Platform","data":{"isAsync":false}},{"name":"./assetPathUtils","data":{"isAsync":false}},{"name":"invariant","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var _classCallCheck = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n\n  var _createClass = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n\n  var PixelRatio = _$$_REQUIRE(_dependencyMap[2], \"PixelRatio\");\n\n  var Platform = _$$_REQUIRE(_dependencyMap[3], \"Platform\");\n\n  var assetPathUtils = _$$_REQUIRE(_dependencyMap[4], \"./assetPathUtils\");\n\n  var invariant = _$$_REQUIRE(_dependencyMap[5], \"invariant\");\n\n  function getScaledAssetPath(asset) {\n    var scale = AssetSourceResolver.pickScale(asset.scales, PixelRatio.get());\n    var scaleSuffix = scale === 1 ? '' : '@' + scale + 'x';\n    var assetDir = assetPathUtils.getBasePath(asset);\n    return assetDir + '/' + asset.name + scaleSuffix + '.' + asset.type;\n  }\n\n  function getAssetPathInDrawableFolder(asset) {\n    var scale = AssetSourceResolver.pickScale(asset.scales, PixelRatio.get());\n    var drawbleFolder = assetPathUtils.getAndroidResourceFolderName(asset, scale);\n    var fileName = assetPathUtils.getAndroidResourceIdentifier(asset);\n    return drawbleFolder + '/' + fileName + '.' + asset.type;\n  }\n\n  var AssetSourceResolver = function () {\n    function AssetSourceResolver(serverUrl, jsbundleUrl, asset) {\n      _classCallCheck(this, AssetSourceResolver);\n\n      this.serverUrl = serverUrl;\n      this.jsbundleUrl = jsbundleUrl;\n      this.asset = asset;\n    }\n\n    _createClass(AssetSourceResolver, [{\n      key: \"isLoadedFromServer\",\n      value: function isLoadedFromServer() {\n        return !!this.serverUrl;\n      }\n    }, {\n      key: \"isLoadedFromFileSystem\",\n      value: function isLoadedFromFileSystem() {\n        return !!(this.jsbundleUrl && this.jsbundleUrl.startsWith('file://'));\n      }\n    }, {\n      key: \"defaultAsset\",\n      value: function defaultAsset() {\n        if (this.isLoadedFromServer()) {\n          return this.assetServerURL();\n        }\n\n        if (Platform.OS === 'android') {\n          return this.isLoadedFromFileSystem() ? this.drawableFolderInBundle() : this.resourceIdentifierWithoutScale();\n        } else {\n          return this.scaledAssetURLNearBundle();\n        }\n      }\n    }, {\n      key: \"assetServerURL\",\n      value: function assetServerURL() {\n        invariant(!!this.serverUrl, 'need server to load from');\n        return this.fromSource(this.serverUrl + getScaledAssetPath(this.asset) + '?platform=' + Platform.OS + '&hash=' + this.asset.hash);\n      }\n    }, {\n      key: \"scaledAssetPath\",\n      value: function scaledAssetPath() {\n        return this.fromSource(getScaledAssetPath(this.asset));\n      }\n    }, {\n      key: \"scaledAssetURLNearBundle\",\n      value: function scaledAssetURLNearBundle() {\n        var path = this.jsbundleUrl || 'file://';\n        return this.fromSource(path + getScaledAssetPath(this.asset));\n      }\n    }, {\n      key: \"resourceIdentifierWithoutScale\",\n      value: function resourceIdentifierWithoutScale() {\n        invariant(Platform.OS === 'android', 'resource identifiers work on Android');\n        return this.fromSource(assetPathUtils.getAndroidResourceIdentifier(this.asset));\n      }\n    }, {\n      key: \"drawableFolderInBundle\",\n      value: function drawableFolderInBundle() {\n        var path = this.jsbundleUrl || 'file://';\n        return this.fromSource(path + getAssetPathInDrawableFolder(this.asset));\n      }\n    }, {\n      key: \"fromSource\",\n      value: function fromSource(source) {\n        return {\n          __packager_asset: true,\n          width: this.asset.width,\n          height: this.asset.height,\n          uri: source,\n          scale: AssetSourceResolver.pickScale(this.asset.scales, PixelRatio.get())\n        };\n      }\n    }], [{\n      key: \"pickScale\",\n      value: function pickScale(scales, deviceScale) {\n        for (var i = 0; i < scales.length; i++) {\n          if (scales[i] >= deviceScale) {\n            return scales[i];\n          }\n        }\n\n        return scales[scales.length - 1] || 1;\n      }\n    }]);\n\n    return AssetSourceResolver;\n  }();\n\n  module.exports = AssetSourceResolver;\n});","map":[[2,0,10,0],[8,0,22,0],[8,6,22,6,"PixelRatio"],[8,16,22,16],[8,19,22,19,"require"],[8,30,22,26],[8,63,22,0],[10,0,23,0],[10,6,23,6,"Platform"],[10,14,23,14],[10,17,23,17,"require"],[10,28,23,24],[10,59,23,0],[12,0,25,0],[12,6,25,6,"assetPathUtils"],[12,20,25,20],[12,23,25,23,"require"],[12,34,25,30],[12,73,25,0],[14,0,26,0],[14,6,26,6,"invariant"],[14,15,26,15],[14,18,26,18,"require"],[14,29,26,25],[14,61,26,0],[16,0,31,0],[16,11,31,9,"getScaledAssetPath"],[16,29,31,0],[16,30,31,28,"asset"],[16,35,31,0],[16,37,31,43],[17,0,32,2],[17,8,32,8,"scale"],[17,13,32,13],[17,16,32,16,"AssetSourceResolver"],[17,35,32,35],[17,36,32,36,"pickScale"],[17,45,32,16],[17,46,32,46,"asset"],[17,51,32,51],[17,52,32,52,"scales"],[17,58,32,16],[17,60,32,60,"PixelRatio"],[17,70,32,70],[17,71,32,71,"get"],[17,74,32,60],[17,76,32,16],[17,77,32,2],[18,0,33,2],[18,8,33,8,"scaleSuffix"],[18,19,33,19],[18,22,33,22,"scale"],[18,27,33,27],[18,32,33,32],[18,33,33,22],[18,36,33,36],[18,38,33,22],[18,41,33,41],[18,47,33,47,"scale"],[18,52,33,41],[18,55,33,55],[18,58,33,2],[19,0,34,2],[19,8,34,8,"assetDir"],[19,16,34,16],[19,19,34,19,"assetPathUtils"],[19,33,34,33],[19,34,34,34,"getBasePath"],[19,45,34,19],[19,46,34,46,"asset"],[19,51,34,19],[19,52,34,2],[20,0,35,2],[20,11,35,9,"assetDir"],[20,19,35,17],[20,22,35,20],[20,25,35,9],[20,28,35,26,"asset"],[20,33,35,31],[20,34,35,32,"name"],[20,38,35,9],[20,41,35,39,"scaleSuffix"],[20,52,35,9],[20,55,35,53],[20,58,35,9],[20,61,35,59,"asset"],[20,66,35,64],[20,67,35,65,"type"],[20,71,35,2],[21,0,36,1],[23,0,41,0],[23,11,41,9,"getAssetPathInDrawableFolder"],[23,39,41,0],[23,40,41,38,"asset"],[23,45,41,0],[23,47,41,53],[24,0,42,2],[24,8,42,8,"scale"],[24,13,42,13],[24,16,42,16,"AssetSourceResolver"],[24,35,42,35],[24,36,42,36,"pickScale"],[24,45,42,16],[24,46,42,46,"asset"],[24,51,42,51],[24,52,42,52,"scales"],[24,58,42,16],[24,60,42,60,"PixelRatio"],[24,70,42,70],[24,71,42,71,"get"],[24,74,42,60],[24,76,42,16],[24,77,42,2],[25,0,43,2],[25,8,43,8,"drawbleFolder"],[25,21,43,21],[25,24,43,24,"assetPathUtils"],[25,38,43,38],[25,39,43,39,"getAndroidResourceFolderName"],[25,67,43,24],[25,68,44,4,"asset"],[25,73,43,24],[25,75,45,4,"scale"],[25,80,43,24],[25,81,43,2],[26,0,47,2],[26,8,47,8,"fileName"],[26,16,47,16],[26,19,47,19,"assetPathUtils"],[26,33,47,33],[26,34,47,34,"getAndroidResourceIdentifier"],[26,62,47,19],[26,63,47,63,"asset"],[26,68,47,19],[26,69,47,2],[27,0,48,2],[27,11,48,9,"drawbleFolder"],[27,24,48,22],[27,27,48,25],[27,30,48,9],[27,33,48,31,"fileName"],[27,41,48,9],[27,44,48,42],[27,47,48,9],[27,50,48,48,"asset"],[27,55,48,53],[27,56,48,54,"type"],[27,60,48,2],[28,0,49,1],[30,6,51,6,"AssetSourceResolver"],[30,25],[31,0,58,2],[31,33,58,14,"serverUrl"],[31,42,58,2],[31,44,58,34,"jsbundleUrl"],[31,55,58,2],[31,57,58,56,"asset"],[31,62,58,2],[31,64,58,78],[32,0,58,78],[34,0,59,4],[34,11,59,9,"serverUrl"],[34,20,59,4],[34,23,59,21,"serverUrl"],[34,32,59,4],[35,0,60,4],[35,11,60,9,"jsbundleUrl"],[35,22,60,4],[35,25,60,23,"jsbundleUrl"],[35,36,60,4],[36,0,61,4],[36,11,61,9,"asset"],[36,16,61,4],[36,19,61,17,"asset"],[36,24,61,4],[37,0,62,3],[41,43,64,32],[42,0,65,4],[42,15,65,11],[42,16,65,12],[42,17,65,13],[42,22,65,18,"serverUrl"],[42,31,65,4],[43,0,66,3],[46,47,68,36],[47,0,69,4],[47,15,69,11],[47,16,69,12],[47,18,69,14],[47,23,69,19,"jsbundleUrl"],[47,34,69,14],[47,38,69,34],[47,43,69,39,"jsbundleUrl"],[47,54,69,34],[47,55,69,51,"startsWith"],[47,65,69,34],[47,66,69,62],[47,75,69,34],[47,76,69,12],[47,77,69,4],[48,0,70,3],[51,37,72,38],[52,0,73,4],[52,12,73,8],[52,17,73,13,"isLoadedFromServer"],[52,35,73,8],[52,37,73,4],[52,39,73,35],[53,0,74,6],[53,17,74,13],[53,22,74,18,"assetServerURL"],[53,36,74,13],[53,38,74,6],[54,0,75,5],[56,0,77,4],[56,12,77,8,"Platform"],[56,20,77,16],[56,21,77,17,"OS"],[56,23,77,8],[56,28,77,24],[56,37,77,4],[56,39,77,35],[57,0,78,6],[57,17,78,13],[57,22,78,18,"isLoadedFromFileSystem"],[57,44,78,13],[57,49,79,10],[57,54,79,15,"drawableFolderInBundle"],[57,76,79,10],[57,78,78,13],[57,81,80,10],[57,86,80,15,"resourceIdentifierWithoutScale"],[57,116,80,10],[57,118,78,6],[58,0,81,5],[58,9,77,4],[58,15,81,11],[59,0,82,6],[59,17,82,13],[59,22,82,18,"scaledAssetURLNearBundle"],[59,46,82,13],[59,48,82,6],[60,0,83,5],[61,0,84,3],[64,39,90,40],[65,0,91,4,"invariant"],[65,8,91,4,"invariant"],[65,17,91,13],[65,18,91,14],[65,19,91,15],[65,20,91,16],[65,25,91,21,"serverUrl"],[65,34,91,13],[65,36,91,32],[65,62,91,13],[65,63,91,4],[66,0,92,4],[66,15,92,11],[66,20,92,16,"fromSource"],[66,30,92,11],[66,31,93,6],[66,36,93,11,"serverUrl"],[66,45,93,6],[66,48,94,8,"getScaledAssetPath"],[66,66,94,26],[66,67,94,27],[66,72,94,32,"asset"],[66,77,94,26],[66,78,93,6],[66,81,95,8],[66,93,93,6],[66,96,96,8,"Platform"],[66,104,96,16],[66,105,96,17,"OS"],[66,107,93,6],[66,110,97,8],[66,118,93,6],[66,121,98,8],[66,126,98,13,"asset"],[66,131,98,8],[66,132,98,19,"hash"],[66,136,92,11],[66,137,92,4],[67,0,100,3],[70,40,106,41],[71,0,107,4],[71,15,107,11],[71,20,107,16,"fromSource"],[71,30,107,11],[71,31,107,27,"getScaledAssetPath"],[71,49,107,45],[71,50,107,46],[71,55,107,51,"asset"],[71,60,107,45],[71,61,107,11],[71,62,107,4],[72,0,108,3],[75,49,114,50],[76,0,115,4],[76,12,115,10,"path"],[76,16,115,14],[76,19,115,17],[76,24,115,22,"jsbundleUrl"],[76,35,115,17],[76,39,115,37],[76,48,115,4],[77,0,116,4],[77,15,116,11],[77,20,116,16,"fromSource"],[77,30,116,11],[77,31,116,27,"path"],[77,35,116,31],[77,38,116,34,"getScaledAssetPath"],[77,56,116,52],[77,57,116,53],[77,62,116,58,"asset"],[77,67,116,52],[77,68,116,11],[77,69,116,4],[78,0,117,3],[81,55,125,56],[82,0,126,4,"invariant"],[82,8,126,4,"invariant"],[82,17,126,13],[82,18,127,6,"Platform"],[82,26,127,14],[82,27,127,15,"OS"],[82,29,127,6],[82,34,127,22],[82,43,126,13],[82,45,128,6],[82,83,126,13],[82,84,126,4],[83,0,130,4],[83,15,130,11],[83,20,130,16,"fromSource"],[83,30,130,11],[83,31,131,6,"assetPathUtils"],[83,45,131,20],[83,46,131,21,"getAndroidResourceIdentifier"],[83,74,131,6],[83,75,131,50],[83,80,131,55,"asset"],[83,85,131,6],[83,86,130,11],[83,87,130,4],[84,0,133,3],[87,47,140,48],[88,0,141,4],[88,12,141,10,"path"],[88,16,141,14],[88,19,141,17],[88,24,141,22,"jsbundleUrl"],[88,35,141,17],[88,39,141,37],[88,48,141,4],[89,0,142,4],[89,15,142,11],[89,20,142,16,"fromSource"],[89,30,142,11],[89,31,142,27,"path"],[89,35,142,31],[89,38,142,34,"getAssetPathInDrawableFolder"],[89,66,142,62],[89,67,142,63],[89,72,142,68,"asset"],[89,77,142,62],[89,78,142,11],[89,79,142,4],[90,0,143,3],[93,33,145,13,"source"],[93,39],[93,41,145,50],[94,0,146,4],[94,15,146,11],[95,0,147,6,"__packager_asset"],[95,10,147,6,"__packager_asset"],[95,26,147,22],[95,28,147,24],[95,32,146,11],[96,0,148,6,"width"],[96,10,148,6,"width"],[96,15,148,11],[96,17,148,13],[96,22,148,18,"asset"],[96,27,148,13],[96,28,148,24,"width"],[96,33,146,11],[97,0,149,6,"height"],[97,10,149,6,"height"],[97,16,149,12],[97,18,149,14],[97,23,149,19,"asset"],[97,28,149,14],[97,29,149,25,"height"],[97,35,146,11],[98,0,150,6,"uri"],[98,10,150,6,"uri"],[98,13,150,9],[98,15,150,11,"source"],[98,21,146,11],[99,0,151,6,"scale"],[99,10,151,6,"scale"],[99,15,151,11],[99,17,151,13,"AssetSourceResolver"],[99,36,151,32],[99,37,151,33,"pickScale"],[99,46,151,13],[99,47,151,43],[99,52,151,48,"asset"],[99,57,151,43],[99,58,151,54,"scales"],[99,64,151,13],[99,66,151,62,"PixelRatio"],[99,76,151,72],[99,77,151,73,"get"],[99,80,151,62],[99,82,151,13],[100,0,146,11],[100,9,146,4],[101,0,153,3],[104,32,155,19,"scales"],[104,38],[104,40,155,42,"deviceScale"],[104,51],[104,53,155,71],[105,0,157,4],[105,13,157,9],[105,17,157,13,"i"],[105,18,157,14],[105,21,157,17],[105,22,157,4],[105,24,157,20,"i"],[105,25,157,21],[105,28,157,24,"scales"],[105,34,157,30],[105,35,157,31,"length"],[105,41,157,4],[105,43,157,39,"i"],[105,44,157,40],[105,46,157,4],[105,48,157,44],[106,0,158,6],[106,14,158,10,"scales"],[106,20,158,16],[106,21,158,17,"i"],[106,22,158,16],[106,23,158,10],[106,27,158,23,"deviceScale"],[106,38,158,6],[106,40,158,36],[107,0,159,8],[107,19,159,15,"scales"],[107,25,159,21],[107,26,159,22,"i"],[107,27,159,21],[107,28,159,8],[108,0,160,7],[109,0,161,5],[111,0,166,4],[111,15,166,11,"scales"],[111,21,166,17],[111,22,166,18,"scales"],[111,28,166,24],[111,29,166,25,"length"],[111,35,166,18],[111,38,166,34],[111,39,166,17],[111,40,166,11],[111,44,166,40],[111,45,166,4],[112,0,167,3],[118,0,170,0,"module"],[118,2,170,0,"module"],[118,8,170,6],[118,9,170,7,"exports"],[118,16,170,0],[118,19,170,17,"AssetSourceResolver"],[118,38,170,0]]},"type":"js/module"}]}