{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"./nodes/AnimatedValue","data":{"isAsync":false}},{"name":"./NativeAnimatedHelper","data":{"isAsync":false}},{"name":"ReactNative","data":{"isAsync":false}},{"name":"invariant","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var _classCallCheck = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n\n  var _createClass = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n\n  var AnimatedValue = _$$_REQUIRE(_dependencyMap[2], \"./nodes/AnimatedValue\");\n\n  var NativeAnimatedHelper = _$$_REQUIRE(_dependencyMap[3], \"./NativeAnimatedHelper\");\n\n  var ReactNative = _$$_REQUIRE(_dependencyMap[4], \"ReactNative\");\n\n  var invariant = _$$_REQUIRE(_dependencyMap[5], \"invariant\");\n\n  var _require = _$$_REQUIRE(_dependencyMap[3], \"./NativeAnimatedHelper\"),\n      shouldUseNativeDriver = _require.shouldUseNativeDriver;\n\n  function attachNativeEvent(viewRef, eventName, argMapping) {\n    var eventMappings = [];\n\n    var traverse = function traverse(value, path) {\n      if (value instanceof AnimatedValue) {\n        value.__makeNative();\n\n        eventMappings.push({\n          nativeEventPath: path,\n          animatedValueTag: value.__getNativeTag()\n        });\n      } else if (typeof value === 'object') {\n        for (var _key in value) {\n          traverse(value[_key], path.concat(_key));\n        }\n      }\n    };\n\n    invariant(argMapping[0] && argMapping[0].nativeEvent, 'Native driven events only support animated values contained inside `nativeEvent`.');\n    traverse(argMapping[0].nativeEvent, []);\n    var viewTag = ReactNative.findNodeHandle(viewRef);\n    eventMappings.forEach(function (mapping) {\n      NativeAnimatedHelper.API.addAnimatedEventToView(viewTag, eventName, mapping);\n    });\n    return {\n      detach: function detach() {\n        eventMappings.forEach(function (mapping) {\n          NativeAnimatedHelper.API.removeAnimatedEventFromView(viewTag, eventName, mapping.animatedValueTag);\n        });\n      }\n    };\n  }\n\n  var AnimatedEvent = function () {\n    function AnimatedEvent(argMapping) {\n      var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, AnimatedEvent);\n\n      this._listeners = [];\n      this._argMapping = argMapping;\n\n      if (config.listener) {\n        this.__addListener(config.listener);\n      }\n\n      this._callListeners = this._callListeners.bind(this);\n      this._attachedEvent = null;\n      this.__isNative = shouldUseNativeDriver(config);\n\n      if (__DEV__) {\n        this._validateMapping();\n      }\n    }\n\n    _createClass(AnimatedEvent, [{\n      key: \"__addListener\",\n      value: function __addListener(callback) {\n        this._listeners.push(callback);\n      }\n    }, {\n      key: \"__removeListener\",\n      value: function __removeListener(callback) {\n        this._listeners = this._listeners.filter(function (listener) {\n          return listener !== callback;\n        });\n      }\n    }, {\n      key: \"__attach\",\n      value: function __attach(viewRef, eventName) {\n        invariant(this.__isNative, 'Only native driven events need to be attached.');\n        this._attachedEvent = attachNativeEvent(viewRef, eventName, this._argMapping);\n      }\n    }, {\n      key: \"__detach\",\n      value: function __detach(viewTag, eventName) {\n        invariant(this.__isNative, 'Only native driven events need to be detached.');\n        this._attachedEvent && this._attachedEvent.detach();\n      }\n    }, {\n      key: \"__getHandler\",\n      value: function __getHandler() {\n        var _this = this;\n\n        if (this.__isNative) {\n          return this._callListeners;\n        }\n\n        return function () {\n          for (var _len = arguments.length, args = new Array(_len), _key2 = 0; _key2 < _len; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          var traverse = function traverse(recMapping, recEvt, key) {\n            if (typeof recEvt === 'number' && recMapping instanceof AnimatedValue) {\n              recMapping.setValue(recEvt);\n            } else if (typeof recMapping === 'object') {\n              for (var mappingKey in recMapping) {\n                traverse(recMapping[mappingKey], recEvt[mappingKey], mappingKey);\n              }\n            }\n          };\n\n          if (!_this.__isNative) {\n            _this._argMapping.forEach(function (mapping, idx) {\n              traverse(mapping, args[idx], 'arg' + idx);\n            });\n          }\n\n          _this._callListeners.apply(_this, args);\n        };\n      }\n    }, {\n      key: \"_callListeners\",\n      value: function _callListeners() {\n        for (var _len2 = arguments.length, args = new Array(_len2), _key3 = 0; _key3 < _len2; _key3++) {\n          args[_key3] = arguments[_key3];\n        }\n\n        this._listeners.forEach(function (listener) {\n          return listener.apply(void 0, args);\n        });\n      }\n    }, {\n      key: \"_validateMapping\",\n      value: function _validateMapping() {\n        var traverse = function traverse(recMapping, recEvt, key) {\n          if (typeof recEvt === 'number') {\n            invariant(recMapping instanceof AnimatedValue, 'Bad mapping of type ' + typeof recMapping + ' for key ' + key + ', event value must map to AnimatedValue');\n            return;\n          }\n\n          invariant(typeof recMapping === 'object', 'Bad mapping of type ' + typeof recMapping + ' for key ' + key);\n          invariant(typeof recEvt === 'object', 'Bad event of type ' + typeof recEvt + ' for key ' + key);\n\n          for (var mappingKey in recMapping) {\n            traverse(recMapping[mappingKey], recEvt[mappingKey], mappingKey);\n          }\n        };\n      }\n    }]);\n\n    return AnimatedEvent;\n  }();\n\n  module.exports = {\n    AnimatedEvent: AnimatedEvent,\n    attachNativeEvent: attachNativeEvent\n  };\n});","map":[[2,0,10,0],[8,0,12,0],[8,6,12,6,"AnimatedValue"],[8,19,12,19],[8,22,12,22,"require"],[8,33,12,29],[8,77,12,0],[10,0,13,0],[10,6,13,6,"NativeAnimatedHelper"],[10,26,13,26],[10,29,13,29,"require"],[10,40,13,36],[10,85,13,0],[12,0,14,0],[12,6,14,6,"ReactNative"],[12,17,14,17],[12,20,14,20,"require"],[12,31,14,27],[12,65,14,0],[14,0,16,0],[14,6,16,6,"invariant"],[14,15,16,15],[14,18,16,18,"require"],[14,29,16,25],[14,61,16,0],[16,17,17,32,"require"],[16,28,17,39],[16,73],[17,6,17,7,"shouldUseNativeDriver"],[17,27],[17,39,17,7,"shouldUseNativeDriver"],[17,60],[19,0,25,0],[19,11,25,9,"attachNativeEvent"],[19,28,25,0],[19,29,26,2,"viewRef"],[19,36,25,0],[19,38,27,2,"eventName"],[19,47,25,0],[19,49,28,2,"argMapping"],[19,59,25,0],[19,61,29,2],[20,0,32,2],[20,8,32,8,"eventMappings"],[20,21,32,21],[20,24,32,24],[20,26,32,2],[22,0,34,2],[22,8,34,8,"traverse"],[22,16,34,16],[22,19,34,19],[22,28,34,8,"traverse"],[22,36,34,19],[22,37,34,20,"value"],[22,42,34,19],[22,44,34,27,"path"],[22,48,34,19],[22,50,34,36],[23,0,35,4],[23,10,35,8,"value"],[23,15,35,13],[23,27,35,25,"AnimatedValue"],[23,40,35,4],[23,42,35,40],[24,0,36,6,"value"],[24,8,36,6,"value"],[24,13,36,11],[24,14,36,12,"__makeNative"],[24,26,36,6],[26,0,38,6,"eventMappings"],[26,8,38,6,"eventMappings"],[26,21,38,19],[26,22,38,20,"push"],[26,26,38,6],[26,27,38,25],[27,0,39,8,"nativeEventPath"],[27,10,39,8,"nativeEventPath"],[27,25,39,23],[27,27,39,25,"path"],[27,31,38,25],[28,0,40,8,"animatedValueTag"],[28,10,40,8,"animatedValueTag"],[28,26,40,24],[28,28,40,26,"value"],[28,33,40,31],[28,34,40,32,"__getNativeTag"],[28,48,40,26],[29,0,38,25],[29,9,38,6],[30,0,42,5],[30,7,35,4],[30,13,42,11],[30,17,42,15],[30,24,42,22,"value"],[30,29,42,15],[30,34,42,32],[30,42,42,11],[30,44,42,42],[31,0,43,6],[31,13,43,11],[31,17,43,17,"key"],[31,21,43,6],[31,25,43,24,"value"],[31,30,43,6],[31,32,43,31],[32,0,44,8,"traverse"],[32,10,44,8,"traverse"],[32,18,44,16],[32,19,44,17,"value"],[32,24,44,22],[32,25,44,23,"key"],[32,29,44,22],[32,30,44,16],[32,32,44,29,"path"],[32,36,44,33],[32,37,44,34,"concat"],[32,43,44,29],[32,44,44,41,"key"],[32,48,44,29],[32,49,44,16],[32,50,44,8],[33,0,45,7],[34,0,46,5],[35,0,47,3],[35,5,34,2],[37,0,49,2,"invariant"],[37,4,49,2,"invariant"],[37,13,49,11],[37,14,50,4,"argMapping"],[37,24,50,14],[37,25,50,15],[37,26,50,14],[37,27,50,4],[37,31,50,21,"argMapping"],[37,41,50,31],[37,42,50,32],[37,43,50,31],[37,44,50,21],[37,45,50,35,"nativeEvent"],[37,56,49,11],[37,58,51,4],[37,141,49,11],[37,142,49,2],[38,0,55,2,"traverse"],[38,4,55,2,"traverse"],[38,12,55,10],[38,13,55,11,"argMapping"],[38,23,55,21],[38,24,55,22],[38,25,55,21],[38,26,55,11],[38,27,55,25,"nativeEvent"],[38,38,55,10],[38,40,55,38],[38,42,55,10],[38,43,55,2],[39,0,57,2],[39,8,57,8,"viewTag"],[39,15,57,15],[39,18,57,18,"ReactNative"],[39,29,57,29],[39,30,57,30,"findNodeHandle"],[39,44,57,18],[39,45,57,45,"viewRef"],[39,52,57,18],[39,53,57,2],[40,0,59,2,"eventMappings"],[40,4,59,2,"eventMappings"],[40,17,59,15],[40,18,59,16,"forEach"],[40,25,59,2],[40,26,59,24],[40,36,59,24,"mapping"],[40,43,59,31],[40,45,59,35],[41,0,60,4,"NativeAnimatedHelper"],[41,6,60,4,"NativeAnimatedHelper"],[41,26,60,24],[41,27,60,25,"API"],[41,30,60,4],[41,31,60,29,"addAnimatedEventToView"],[41,53,60,4],[41,54,61,6,"viewTag"],[41,61,60,4],[41,63,62,6,"eventName"],[41,72,60,4],[41,74,63,6,"mapping"],[41,81,60,4],[42,0,65,3],[42,5,59,2],[43,0,67,2],[43,11,67,9],[44,0,68,4,"detach"],[44,6,68,4,"detach"],[44,12,67,9],[44,32,68,13],[45,0,69,6,"eventMappings"],[45,8,69,6,"eventMappings"],[45,21,69,19],[45,22,69,20,"forEach"],[45,29,69,6],[45,30,69,28],[45,40,69,28,"mapping"],[45,47,69,35],[45,49,69,39],[46,0,70,8,"NativeAnimatedHelper"],[46,10,70,8,"NativeAnimatedHelper"],[46,30,70,28],[46,31,70,29,"API"],[46,34,70,8],[46,35,70,33,"removeAnimatedEventFromView"],[46,62,70,8],[46,63,71,10,"viewTag"],[46,70,70,8],[46,72,72,10,"eventName"],[46,81,70,8],[46,83,73,10,"mapping"],[46,90,73,17],[46,91,73,18,"animatedValueTag"],[46,107,70,8],[47,0,75,7],[47,9,69,6],[48,0,76,5],[49,0,67,9],[49,5,67,2],[50,0,78,1],[52,6,80,6,"AnimatedEvent"],[52,19],[53,0,89,2],[53,27,89,14,"argMapping"],[53,37,89,2],[53,39,89,70],[54,0,89,70],[54,10,89,43,"config"],[54,16,89,70],[54,87,89,66],[54,89,89,70],[56,0,89,70],[58,0,89,70],[58,11,82,2,"_listeners"],[58,21,89,70],[58,24,82,32],[58,26,89,70],[59,0,90,4],[59,11,90,9,"_argMapping"],[59,22,90,4],[59,25,90,23,"argMapping"],[59,35,90,4],[61,0,91,4],[61,10,91,8,"config"],[61,16,91,14],[61,17,91,15,"listener"],[61,25,91,4],[61,27,91,25],[62,0,92,6],[62,13,92,11,"__addListener"],[62,26,92,6],[62,27,92,25,"config"],[62,33,92,31],[62,34,92,32,"listener"],[62,42,92,6],[63,0,93,5],[65,0,94,4],[65,11,94,9,"_callListeners"],[65,25,94,4],[65,28,94,26],[65,33,94,31,"_callListeners"],[65,47,94,26],[65,48,94,46,"bind"],[65,52,94,26],[65,53,94,51],[65,57,94,26],[65,58,94,4],[66,0,95,4],[66,11,95,9,"_attachedEvent"],[66,25,95,4],[66,28,95,26],[66,32,95,4],[67,0,96,4],[67,11,96,9,"__isNative"],[67,21,96,4],[67,24,96,22,"shouldUseNativeDriver"],[67,45,96,43],[67,46,96,44,"config"],[67,52,96,43],[67,53,96,4],[69,0,98,4],[69,10,98,8,"__DEV__"],[69,17,98,4],[69,19,98,17],[70,0,99,6],[70,13,99,11,"_validateMapping"],[70,29,99,6],[71,0,100,5],[72,0,101,3],[76,36,103,16,"callback"],[76,44],[76,46,103,42],[77,0,104,4],[77,13,104,9,"_listeners"],[77,23,104,4],[77,24,104,20,"push"],[77,28,104,4],[77,29,104,25,"callback"],[77,37,104,4],[78,0,105,3],[81,39,107,19,"callback"],[81,47],[81,49,107,45],[82,0,108,4],[82,13,108,9,"_listeners"],[82,23,108,4],[82,26,108,22],[82,31,108,27,"_listeners"],[82,41,108,22],[82,42,108,38,"filter"],[82,48,108,22],[82,49,108,45],[82,59,108,45,"listener"],[82,67,108,53],[83,0,108,53],[83,17,108,57,"listener"],[83,25,108,65],[83,30,108,70,"callback"],[83,38,108,53],[84,0,108,53],[84,9,108,22],[84,10,108,4],[85,0,109,3],[88,31,111,11,"viewRef"],[88,38],[88,40,111,25,"eventName"],[88,49],[88,51,111,44],[89,0,112,4,"invariant"],[89,8,112,4,"invariant"],[89,17,112,13],[89,18,113,6],[89,23,113,11,"__isNative"],[89,33,112,13],[89,35,114,6],[89,83,112,13],[89,84,112,4],[90,0,117,4],[90,13,117,9,"_attachedEvent"],[90,27,117,4],[90,30,117,26,"attachNativeEvent"],[90,47,117,43],[90,48,118,6,"viewRef"],[90,55,117,43],[90,57,119,6,"eventName"],[90,66,117,43],[90,68,120,6],[90,73,120,11,"_argMapping"],[90,84,117,43],[90,85,117,4],[91,0,122,3],[94,31,124,11,"viewTag"],[94,38],[94,40,124,25,"eventName"],[94,49],[94,51,124,44],[95,0,125,4,"invariant"],[95,8,125,4,"invariant"],[95,17,125,13],[95,18,126,6],[95,23,126,11,"__isNative"],[95,33,125,13],[95,35,127,6],[95,83,125,13],[95,84,125,4],[96,0,130,4],[96,13,130,9,"_attachedEvent"],[96,27,130,4],[96,31,130,27],[96,36,130,32,"_attachedEvent"],[96,50,130,27],[96,51,130,47,"detach"],[96,57,130,27],[96,59,130,4],[97,0,131,3],[100,37,133,17],[101,0,133,17],[103,0,134,4],[103,12,134,8],[103,17,134,13,"__isNative"],[103,27,134,4],[103,29,134,25],[104,0,135,6],[104,17,135,13],[104,22,135,18,"_callListeners"],[104,36,135,6],[105,0,136,5],[107,0,138,4],[107,15,138,11],[107,27,138,29],[108,0,138,29],[108,44,138,15,"args"],[108,48,138,29],[109,0,138,15,"args"],[109,12,138,15,"args"],[109,16,138,29],[110,0,138,29],[112,0,139,6],[112,14,139,12,"traverse"],[112,22,139,20],[112,25,139,23],[112,34,139,12,"traverse"],[112,42,139,23],[112,43,139,24,"recMapping"],[112,53,139,23],[112,55,139,36,"recEvt"],[112,61,139,23],[112,63,139,44,"key"],[112,66,139,23],[112,68,139,52],[113,0,140,8],[113,16,140,12],[113,23,140,19,"recEvt"],[113,29,140,12],[113,34,140,30],[113,42,140,12],[113,46,140,42,"recMapping"],[113,56,140,52],[113,68,140,64,"AnimatedValue"],[113,81,140,8],[113,83,140,79],[114,0,141,10,"recMapping"],[114,14,141,10,"recMapping"],[114,24,141,20],[114,25,141,21,"setValue"],[114,33,141,10],[114,34,141,30,"recEvt"],[114,40,141,10],[115,0,142,9],[115,13,140,8],[115,19,142,15],[115,23,142,19],[115,30,142,26,"recMapping"],[115,40,142,19],[115,45,142,41],[115,53,142,15],[115,55,142,51],[116,0,143,10],[116,19,143,15],[116,23,143,21,"mappingKey"],[116,33,143,10],[116,37,143,35,"recMapping"],[116,47,143,10],[116,49,143,47],[117,0,147,12,"traverse"],[117,16,147,12,"traverse"],[117,24,147,20],[117,25,147,21,"recMapping"],[117,35,147,31],[117,36,147,32,"mappingKey"],[117,46,147,31],[117,47,147,20],[117,49,147,45,"recEvt"],[117,55,147,51],[117,56,147,52,"mappingKey"],[117,66,147,51],[117,67,147,20],[117,69,147,65,"mappingKey"],[117,79,147,20],[117,80,147,12],[118,0,148,11],[119,0,149,9],[120,0,150,7],[120,11,139,6],[122,0,152,6],[122,14,152,10],[122,15,152,11],[122,20,152,15],[122,21,152,16,"__isNative"],[122,31,152,6],[122,33,152,28],[123,0,153,8],[123,12,153,8],[123,17,153,12],[123,18,153,13,"_argMapping"],[123,29,153,8],[123,30,153,25,"forEach"],[123,37,153,8],[123,38,153,33],[123,48,153,34,"mapping"],[123,55,153,33],[123,57,153,43,"idx"],[123,60,153,33],[123,62,153,51],[124,0,154,10,"traverse"],[124,14,154,10,"traverse"],[124,22,154,18],[124,23,154,19,"mapping"],[124,30,154,18],[124,32,154,28,"args"],[124,36,154,32],[124,37,154,33,"idx"],[124,40,154,32],[124,41,154,18],[124,43,154,39],[124,51,154,47,"idx"],[124,54,154,18],[124,55,154,10],[125,0,155,9],[125,13,153,8],[126,0,156,7],[128,0,157,6],[128,10,157,6],[128,15,157,10],[128,16,157,11,"_callListeners"],[128,30,157,6],[128,37,157,6],[128,42,157,10],[128,44,157,29,"args"],[128,48,157,10],[128,49,157,6],[129,0,158,5],[129,9,138,4],[130,0,159,3],[133,39,161,31],[134,0,161,31],[134,43,161,20,"args"],[134,47,161,31],[135,0,161,20,"args"],[135,10,161,20,"args"],[135,14,161,31],[136,0,161,31],[138,0,162,4],[138,13,162,9,"_listeners"],[138,23,162,4],[138,24,162,20,"forEach"],[138,31,162,4],[138,32,162,28],[138,42,162,28,"listener"],[138,50,162,36],[139,0,162,36],[139,17,162,40,"listener"],[139,25,162,48],[139,31,162,40],[139,40,162,52,"args"],[139,44,162,40],[139,45,162,36],[140,0,162,36],[140,9,162,4],[141,0,163,3],[144,41,165,21],[145,0,166,4],[145,12,166,10,"traverse"],[145,20,166,18],[145,23,166,21],[145,32,166,10,"traverse"],[145,40,166,21],[145,41,166,22,"recMapping"],[145,51,166,21],[145,53,166,34,"recEvt"],[145,59,166,21],[145,61,166,42,"key"],[145,64,166,21],[145,66,166,50],[146,0,167,6],[146,14,167,10],[146,21,167,17,"recEvt"],[146,27,167,10],[146,32,167,28],[146,40,167,6],[146,42,167,38],[147,0,168,8,"invariant"],[147,12,168,8,"invariant"],[147,21,168,17],[147,22,169,10,"recMapping"],[147,32,169,20],[147,44,169,32,"AnimatedValue"],[147,57,168,17],[147,59,170,10],[147,84,171,12],[147,91,171,19,"recMapping"],[147,101,170,10],[147,104,172,12],[147,115,170,10],[147,118,173,12,"key"],[147,121,170,10],[147,124,174,12],[147,165,168,17],[147,166,168,8],[148,0,176,8],[149,0,177,7],[151,0,178,6,"invariant"],[151,10,178,6,"invariant"],[151,19,178,15],[151,20,179,8],[151,27,179,15,"recMapping"],[151,37,179,8],[151,42,179,30],[151,50,178,15],[151,52,180,8],[151,77,180,33],[151,84,180,40,"recMapping"],[151,94,180,8],[151,97,180,53],[151,108,180,8],[151,111,180,67,"key"],[151,114,178,15],[151,115,178,6],[152,0,182,6,"invariant"],[152,10,182,6,"invariant"],[152,19,182,15],[152,20,183,8],[152,27,183,15,"recEvt"],[152,33,183,8],[152,38,183,26],[152,46,182,15],[152,48,184,8],[152,71,184,31],[152,78,184,38,"recEvt"],[152,84,184,8],[152,87,184,47],[152,98,184,8],[152,101,184,61,"key"],[152,104,182,15],[152,105,182,6],[154,0,186,6],[154,15,186,11],[154,19,186,17,"mappingKey"],[154,29,186,6],[154,33,186,31,"recMapping"],[154,43,186,6],[154,45,186,43],[155,0,187,8,"traverse"],[155,12,187,8,"traverse"],[155,20,187,16],[155,21,187,17,"recMapping"],[155,31,187,27],[155,32,187,28,"mappingKey"],[155,42,187,27],[155,43,187,16],[155,45,187,41,"recEvt"],[155,51,187,47],[155,52,187,48,"mappingKey"],[155,62,187,47],[155,63,187,16],[155,65,187,61,"mappingKey"],[155,75,187,16],[155,76,187,8],[156,0,188,7],[157,0,189,5],[157,9,166,4],[158,0,190,3],[164,0,193,0,"module"],[164,2,193,0,"module"],[164,8,193,6],[164,9,193,7,"exports"],[164,16,193,0],[164,19,193,17],[165,0,193,18,"AnimatedEvent"],[165,4,193,18,"AnimatedEvent"],[165,17,193,31],[165,19,193,18,"AnimatedEvent"],[165,32,193,17],[166,0,193,33,"attachNativeEvent"],[166,4,193,33,"attachNativeEvent"],[166,21,193,50],[166,23,193,33,"attachNativeEvent"],[167,0,193,17],[167,3,193,0]]},"type":"js/module"}]}